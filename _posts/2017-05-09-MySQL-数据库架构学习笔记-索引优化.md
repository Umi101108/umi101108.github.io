---
layout: post
title:  "MySQL 数据库架构学习笔记-索引优化"
date:   2017-05-09
categories: MySQL
tags: MySQL 索引 优化
excerpt: 打造扛得住的MySQL数据库架构之数据库索引优化
---

* content
{:toc}


# 索引

告诉存储引擎如何快速找到所需要的数据



### MySQL支持的索引类型

* B-tree索引的特点

  * B-tree索引以B+数的结构存储数据
  * B-tree索引能够加快数据的查询速度
  * B-tree索引更适合进行范围查找

* 在什么情况下可以用到B树索引

  * 全值匹配的查询

    order_sn = '23423234'

  * 匹配最左前缀的查询

    联合索引的第一列

  * 匹配列前缀查询

  * 匹配范围值的查询

    order_sn > '23434'

  * 精确匹配左前列并范围匹配另外一列

  * 只访问索引的查询

* B-tree索引的使用限制

  * 如果不是按照最左列开始查找，则无法使用索引

  * 使用索引时不能跳过索引中的列

    联合索引不能跳过某一列

  * Not in和 <>操作无法使用索引

  * 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引

* Hash索引的特点

  * Hash索引是基于Hash表实现的，只有查询条件精确匹配Hash索引中的所有列时，才能够使用到hash索引。
  * 对于Hash索引中的所有列，存储引擎都会为每一行计算一个Hash码，Hash索引中存储的就是Hash码。

* Hash索引的限制

  * Hash索引必须进行二次查找
  * Hash索引无法用于排序
  * Hash索引不支持部分索引查找也不支持范围查找
  * Hash索引中Hash码的计算可能存在Hash冲突

* 为什么要使用索引

  * 索引大大减少了存储引擎需要扫描的数据量

    因为索引的大小比数据要小的多，一页内可以存储更多的数量

  * 索引可以帮助我们进行排序以避免使用临时表

  * 索引可以把随机I/O变为顺序I/O

* 索引可能会带来的损耗

  * 索引会增加写操作的成本
  * 太多的索引会增加查询优化器的选择时间